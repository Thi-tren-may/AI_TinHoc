{% extends "admin/base_admin.html" %}

{% block title %}T·ªïng quan qu·∫£n tr·ªã{% endblock %}

{% block admin_content %}
<div class="container-fluid animate-fade-in px-4">

    <!-- KHUNG CH√ÄO ADMIN (C√ì M√ÄU) -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card border-0 shadow-sm stat-card bg-primary-gradient text-white">
                <div class="card-body p-4 p-md-5">
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <div>
                            <h1 class="fw-bold mb-2">
                                Xin ch√†o, Qu·∫£n tr·ªã vi√™n! üëã
                            </h1>
                            <p class="lead opacity-75 mb-0">
                                B·∫°n ƒëang ƒëƒÉng nh·∫≠p v·ªõi quy·ªÅn qu·∫£n tr·ªã h·ªá th·ªëng √¥n t·∫≠p Tin h·ªçc.
                                T·∫°i ƒë√¢y, b·∫°n c√≥ th·ªÉ qu·∫£n l√Ω ng∆∞·ªùi h·ªçc, ch·ªß ƒë·ªÅ v√† ng√¢n h√†ng c√¢u h·ªèi.
                            </p>
                        </div>
                        <div class="text-end d-none d-md-block ms-auto">
                            <br>
                            <span id="currentDate" class="fw-bold fs-5"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TH·ªêNG K√ä -->
    <div class="row g-4 mb-5">

        <!-- H·ªçc sinh -->
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100 stat-card bg-primary-gradient text-white">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-uppercase opacity-75 mb-2">T√†i kho·∫£n H·ªçc sinh</h6>
                            <h2 class="display-4 fw-bold mb-0">{{ student_count }}</h2>
                        </div>
                        <div class="icon-circle bg-white text-primary">
                            <i class="fas fa-user-graduate fa-2x"></i>
                        </div>
                    </div>
                    <a href="{{ url_for('admin.manage_students') }}" class="stretched-link text-white text-decoration-none small mt-3 d-inline-block opacity-75">
                        Qu·∫£n l√Ω h·ªçc sinh <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- Ch·ªß ƒë·ªÅ -->
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100 stat-card bg-success-gradient text-white">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-uppercase opacity-75 mb-2">Ch·ªß ƒë·ªÅ √¥n t·∫≠p</h6>
                            <h2 class="display-4 fw-bold mb-0">{{ topic_count }}</h2>
                        </div>
                        <div class="icon-circle bg-white text-success">
                            <i class="fas fa-layer-group fa-2x"></i>
                        </div>
                    </div>
                    <a href="{{ url_for('admin.manage_topics') }}" class="stretched-link text-white text-decoration-none small mt-3 d-inline-block opacity-75">
                        Qu·∫£n l√Ω ch·ªß ƒë·ªÅ <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- C√¢u h·ªèi -->
        <div class="col-md-4">
            <div class="card border-0 shadow-sm h-100 stat-card bg-warning-gradient text-white">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-uppercase opacity-75 mb-2">Ng√¢n h√†ng c√¢u h·ªèi</h6>
                            <h2 class="display-4 fw-bold mb-0">{{ question_count }}</h2>
                        </div>
                        <div class="icon-circle bg-white text-warning">
                            <i class="fas fa-question fa-2x"></i>
                        </div>
                    </div>
                    <a href="{{ url_for('admin.manage_questions') }}" class="stretched-link text-white text-decoration-none small mt-3 d-inline-block opacity-75">
                        Qu·∫£n l√Ω c√¢u h·ªèi <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                </div>
            </div>
        </div>

    </div>

    <!-- GI·ªöI THI·ªÜU H·ªÜ TH·ªêNG -->
    <div class="row g-4">
        <div class="col-md-6">
            <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(to bottom right, #ffffff, #f8f9fa);">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center mb-4">
                        <div class="bg-primary bg-opacity-10 p-3 rounded-circle me-3">
                            <i class="fas fa-rocket text-primary fa-2x"></i>
                        </div>
                        <div>
                            <h5 class="fw-bold mb-1 text-dark">M·ª•c ti√™u h·ªá th·ªëng</h5>
                            <small class="text-muted text-uppercase fw-bold" style="letter-spacing: 1px;">S·ª© m·ªánh & T·∫ßm nh√¨n</small>
                        </div>
                    </div>
                    
                    <p class="text-dark opacity-75 mb-4">
                        X√¢y d·ª±ng m√¥i tr∆∞·ªùng √¥n t·∫≠p th√¥ng minh, gi√∫p h·ªçc sinh l√†m ch·ªß ki·∫øn th·ª©c Tin h·ªçc theo ƒë·ªãnh h∆∞·ªõng Ch∆∞∆°ng tr√¨nh GDPT 2018.
                    </p>

                    <div class="d-flex flex-column gap-3">
                        <div class="d-flex align-items-start">
                            <i class="fas fa-database text-warning mt-1 me-3"></i>
                            <div>
                                <span class="fw-bold text-dark">Ng√¢n h√†ng c√¢u h·ªèi chu·∫©n h√≥a</span>
                                <p class="mb-0 small text-muted">Qu·∫£n l√Ω, ph√¢n lo·∫°i c√¢u h·ªèi theo ch·ªß ƒë·ªÅ v√† m·ª©c ƒë·ªô nh·∫≠n th·ª©c.</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-start">
                            <i class="fas fa-chart-line text-success mt-1 me-3"></i>
                            <div>
                                <span class="fw-bold text-dark">Ph√°t tri·ªÉn nƒÉng l·ª±c</span>
                                <p class="mb-0 small text-muted">ƒê√°nh gi√° nƒÉng l·ª±c h·ªçc sinh qua bi·ªÉu ƒë·ªì v√† l·ªô tr√¨nh c√° nh√¢n.</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-start">
                            <i class="fas fa-sync-alt text-info mt-1 me-3"></i>
                            <div>
                                <span class="fw-bold text-dark">C·∫≠p nh·∫≠t li√™n t·ª•c</span>
                                <p class="mb-0 small text-muted">B√°m s√°t thay ƒë·ªïi c·ªßa B·ªô GD&ƒêT v·ªÅ c·∫•u tr√∫c ƒë·ªÅ thi.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card border-0 shadow-sm h-100">
                <div class="card-body p-4">
                    <h5 class="fw-bold mb-3">
                        <i class="fas fa-book text-success me-2"></i>
                        N·ªôi dung √¥n t·∫≠p (Ch∆∞∆°ng tr√¨nh 2018)
                    </h5>
                    <p class="text-muted mb-2">H·ªá th·ªëng qu·∫£n l√Ω c√°c ch·ªß ƒë·ªÅ c·ªët l√µi sau:</p>
                    <ul class="list-unstyled text-muted mb-0 small">
                        {% set letters = ['A', 'B', 'C', 'D', 'E', 'F', 'G'] %}
                        {% for topic in large_topics %}
                        {% set label = letters[loop.index0] if loop.index0 < 7 else loop.index %}
                        <li class="mb-1"><i class="fas fa-angle-right text-primary me-2"></i><strong>Ch·ªß ƒë·ªÅ {{ label }}: {{ topic['Name'] }}</strong></li>
                        {% else %}
                        <li class="text-muted fst-italic">Ch∆∞a c√≥ ch·ªß ƒë·ªÅ l·ªõn n√†o ƒë∆∞·ª£c t·∫°o.</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    document.getElementById('currentDate').innerText =
        new Date().toLocaleDateString('vi-VN', options);
</script>

<style>
    .bg-primary-gradient { background: linear-gradient(135deg, #4e54c8, #8f94fb); }
    .bg-success-gradient { background: linear-gradient(135deg, #11998e, #38ef7d); }
    .bg-warning-gradient { background: linear-gradient(135deg, #f2994a, #f2c94c); }

    .stat-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border-radius: 15px;
        overflow: hidden;
    }
    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.15) !important;
    }

    .icon-circle {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
</style>
{% endblock %}
