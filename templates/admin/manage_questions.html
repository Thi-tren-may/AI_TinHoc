{% extends "admin/base_admin.html" %} {% block admin_content %}
<style>
  /* 1. Hiệu ứng Card nổi khối */
  .card-pro {
    border: none;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); /* Bóng mờ sang trọng */
    overflow: hidden; /* Để bo góc không bị chờm */
    transition: transform 0.3s ease;
  }

  /* 2. Màu tiêu đề bảng */
  /* 2. Màu tiêu đề bảng: Xanh nhạt nền nã - Chữ đậm sắc nét */
  .bg-gradient-primary th {
    background-color: #e3f2fd !important; /* Nền Xanh dương rất nhạt */
    color: #0d47a1 !important; /* Chữ Xanh than đậm */
    border-bottom: 2px solid #90caf9 !important; /* Đường kẻ xanh */
    font-weight: 800;
    text-transform: uppercase;
  }

  /* 3. Hiệu ứng Nút bấm "Nảy" khi di chuột */
  .btn-hover-effect {
    transition: all 0.2s ease-in-out;
    box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
  }
  .btn-hover-effect:hover {
    transform: translateY(-2px); /* Nhấc nút lên 2px */
    box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
  }

  /* 4. Hiệu ứng bảng */
  .table-pro thead th {
    border-top: none;
    border-bottom: none;
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 0.5px;
  }
  .table-pro tbody tr {
    transition: background-color 0.2s ease;
  }
  .table-pro tbody tr:hover {
    background-color: #f8f9fc; /* Đổi màu nền nhẹ khi di chuột vào dòng */
  }

  /* 5. Căn chỉnh Badge (Nhãn mức độ) */
  .badge-pro {
    padding: 0.5em 0.8em;
    font-weight: 500;
    letter-spacing: 0.3px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }
</style>

<div class="container mt-4 animate-fade-in">
  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %} {% for category, message in messages %}
  <div
    class="alert alert-{{ category }} alert-dismissible fade show shadow-sm rounded-3 mb-4"
    role="alert"
  >
    <i class="fas fa-check-circle me-2"></i> {{ message }}
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
  {% endfor %} {% endif %} {% endwith %}

  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2
        class="text-primary fw-bold mb-0"
        style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1)"
      >
        <i class="fas fa-desktop me-2"></i> Ngân hàng Câu hỏi
      </h2>
      <p class="text-muted mb-0 mt-1 small">
        Quản lý toàn bộ câu hỏi trắc nghiệm của hệ thống
      </p>
    </div>

    <a
      href="{{ url_for('admin.add_question') }}"
      class="btn btn-success btn-hover-effect rounded-pill px-4 py-2 fw-bold"
    >
      <i class="fas fa-plus-circle me-2"></i> Thêm câu hỏi
    </a>
  </div>

  <div class="card card-pro">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover table-pro mb-0 align-middle">
          <thead
            class="bg-gradient-primary text-center text-nowrap align-middle"
          >
            <tr>
              <th style="width: 5%" class="py-3">ID</th>
              <th style="width: 45%" class="text-start py-3">
                Nội dung câu hỏi
              </th>
              <th style="width: 20%" class="py-3">Chủ đề</th>
              <th style="width: 10%" class="py-3">Mức độ</th>
              <th style="width: 8%" class="py-3">Đáp án</th>
              <th style="width: 12%" class="py-3">Hành động</th>
            </tr>
          </thead>
          <tbody>
            {% for q in questions %}
            <tr>
              <td class="text-center fw-bold text-secondary">{{ q['Id'] }}</td>

              <td>
                <div
                  class="text-dark fw-bold mb-1"
                  style="max-width: 500px; white-space: normal"
                >
                  {{ q['Content'] }}
                </div>
              </td>

              <td class="text-center text-muted small">{{ q['TopicName'] }}</td>

              <td class="text-center">
                {% if q['Difficulty'] == 1 %}
                <span class="badge badge-pro bg-success rounded-pill">
                  <i class="fas fa-check me-1"></i>Nhận biết
                </span>
                {% elif q['Difficulty'] == 2 %}
                <span class="badge badge-pro bg-warning text-dark rounded-pill">
                  <i class="fas fa-star-half-alt me-1"></i>Thông hiểu
                </span>
                {% else %}
                <span class="badge badge-pro bg-danger rounded-pill">
                  <i class="fas fa-fire me-1"></i>Vận dụng
                </span>
                {% endif %}
              </td>

              <td class="text-center">
                <span
                  class="badge bg-light text-dark border fw-bold fs-6"
                  style="width: 35px; height: 35px; line-height: 25px"
                >
                  {{ q['CorrectOption'] }}
                </span>
              </td>

              <td class="text-center">
                <a
                  href="{{ url_for('admin.edit_question', id=q['Id']) }}"
                  class="btn btn-warning btn-sm btn-hover-effect rounded-circle shadow-sm me-1"
                  title="Sửa"
                  style="width: 32px; height: 32px"
                >
                  <i class="fas fa-pen fa-xs text-white"></i>
                </a>

                <a
                  href="{{ url_for('admin.delete_question', id=q['Id']) }}"
                  class="btn btn-danger btn-sm btn-hover-effect rounded-circle shadow-sm"
                  title="Xóa"
                  onclick="return confirm('CẢNH BÁO: Bạn có chắc chắn muốn xóa câu hỏi này không? Hành động này không thể hoàn tác!');"
                  style="width: 32px; height: 32px"
                >
                  <i class="fas fa-trash fa-xs"></i>
                </a>
              </td>
            </tr>
            {% else %}
            <tr>
              <td colspan="6" class="text-center py-5">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/7486/7486754.png"
                  width="80"
                  class="mb-3 opacity-50"
                />
                <p class="text-muted">Chưa có dữ liệu câu hỏi nào.</p>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
